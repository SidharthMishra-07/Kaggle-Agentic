--> Overview of Agent2Agent (A2A)

ðŸ¤” The Problem
As you build more complex AI systems, you'll find that:
    A single agent can't do everything - Specialized agents for different domains work better
    You need agents to collaborate - Customer support needs product data, order systems need inventory info
    Different teams build different agents - You want to integrate agents from external vendors
    Agents may use different languages/frameworks - You need a standard communication protocol

âœ… The Solution: A2A Protocol
The Agent2Agent (A2A) Protocol is a standard that allows agents to:
    âœ¨ Communicate over networks - Agents can be on different machines
    âœ¨ Use each other's capabilities - One agent can call another agent like a tool
    âœ¨ Work across frameworks - Language/framework agnostic
    âœ¨ Maintain formal contracts - Agent cards describe capabilities


--> Here's a high-level view of the system architecture

How it works:

Customer asks a product question to your Customer Support Agent
Support Agent realizes it needs product information
Support Agent calls the Product Catalog Agent via A2A protocol
Product Catalog Agent (external vendor) returns product data
Support Agent formulates an answer and responds to the customer

--> ADK's to_a2a() function : To make our Product Catalog Agent accessible to other agents.

What to_a2a() does:
    ðŸ”§ Wraps your agent in an A2A-compatible server (FastAPI/Starlette)
    ðŸ“‹ Auto-generates an agent card that includes:
            Agent name, description, and version
            Skills (your tools/functions become "skills" in A2A)
            Protocol version and endpoints
            Input/output modes
    ðŸŒ Serves the agent card at /.well-known/agent-card.json (standard A2A path)
    âœ¨ Handles all A2A protocol details (request/response formatting, task endpoints)

This is the easiest way to expose an ADK agent via A2A!

ðŸ’¡ Key Concept: Agent Cards

An agent card is a JSON document that serves as a "business card" for your agent. It describes:

    What the agent does (name, description, version)
    What capabilities it has (skills, tools, functions)
    How to communicate with it (URL, protocol version, endpoints)
    Every A2A agent must publish its agent card at the standard path: /.well-known/agent-card.json

Think of it as the "contract" that tells other agents how to work with your agent.



--> RemoteA2aAgent

How it works:
    We use RemoteA2aAgent to create a client-side proxy for the Product Catalog Agent
    The Customer Support Agent can use the Product Catalog Agent like any other tool
    ADK handles all the A2A protocol communication behind the scenes

This demonstrates the power of A2A: agents can collaborate as if they were local!

How RemoteA2aAgent works:
    It's a client-side proxy that reads the remote agent's card
    Translates sub-agent calls into A2A protocol requests (HTTP POST to /tasks)
    Handles all the protocol details so you just use it like a regular sub-agent


--> Test A2A Communication
Let's test the agent-to-agent communication! We'll ask the Customer Support Agent about products, and it will communicate with the Product Catalog Agent via A2A.

What happens behind the scenes:
    Customer asks Support Agent a question about a product
    Support Agent realizes it needs product info
    Support Agent calls the remote_product_catalog_agent (RemoteA2aAgent)
    ADK sends an A2A protocol request to http://localhost:8001
    Product Catalog Agent processes the request and responds
    Support Agent receives the response and continues
    Customer gets the final answer
    
All of this happens transparently - the Support Agent doesn't need to know it's talking to a remote agent!


--> A2A Protocol Communication:

Behind the scenes, here's what happens at the protocol level:

    RemoteA2aAgent sends HTTP POST requests to the /tasks endpoint on http://localhost:8001
    Request and response data follow the A2A Protocol Specification
    Data is exchanged in standardized JSON format
    The protocol ensures any A2A-compatible agent (regardless of language/framework) can communicate

This standardization is what makes cross-organization, cross-language agent communication possible!

--> What happened:

    Customer asked about the iPhone 15 Pro
    Customer Support Agent (LlmAgent) received the question and decided it needs product information
    Support Agent delegated to the product_catalog_agent sub-agent
    RemoteA2aAgent (client-side proxy) translated this into an A2A protocol request
    The A2A request was sent over HTTP to http://localhost:8001 (highlighted in yellow)
    Product Catalog Agent (server) received the request and called get_product_info("iPhone 15 Pro")
    Product Catalog Agent returned the product information via A2A response
    RemoteA2aAgent received the response and passed it back to the Support Agent
    Support Agent formulated a final answer with the product details
    Customer received the complete, helpful response